{% extends "dashboard/index.html" %} {% block content %} {% load static %}
<h1>Camaras</h1>

<div class="row">
	<div class="col-2">
		<button type="button" class="btn btn-primary" data-coreui-toggle="modal" data-coreui-target="#createCameraModal" >
			Agregar cámara
		</button>
	</div>
</div>
<br>
<div class="row">
	<table class="table">
		<thead>
			<tr>
				<th scope="col">#</th>
				<th scope="col">ID</th>
				<th scope="col">Cámara</th>
				<th scope="col">RTSP</th>
				<th scope="col">Servicios</th>
				<th scope="col">Vista</th>
				<th scope="col">Editar</th>
				<th scope="col">Eliminar</th>
			</tr>
		</thead>
		<tbody>
			{% for camera in cameras_list %}
				<tr>
					<th scope="row">{{ cameras_list.start_index|add:forloop.counter0 }}</th>
					<td>{{ camera.camera_id }}</td>
					<td>{{ camera.name }}</td>
					<td>{{ camera.rtsp }}</td>
					<td>
						{% if camera.peop_c_service %}
							Contéo de personas
						{% elif camera.face_rec_service %}
							Reconocimiento facial
						{% elif camera.vehicles_service %}
							Registro de placas vehiculares
						{% else %}
							Sin servicios activos
						{% endif %}
					</td>
					<td>
						<a href="{% url 'rtsp_camera' id=camera.camera_id %}" class="btn btn-secondary">
							<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 96 960 960" width="24">
								<path d="{% include "dashboard/modules/icons/eye_path.txt"%}"/>
							</svg>
						</a>
					</td>
					<td>
						<a href="{% url 'edit_camera' id=camera.camera_id %}?page={{ cameras_list.number }}" class="btn btn-primary">
							<svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 96 960 960" width="24">
								<path d="{% include "dashboard/modules/icons/edit_path.txt"%}"/>
							</svg>
						</a>
					</td>
					<td>
						<a href="{% url 'delete_camera' id=camera.camera_id %}?page={{ cameras_list.number }}" class="btn btn-danger">
							<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 96 960 960" width="24">
								<path d="{% include "dashboard/modules/icons/delete_path.txt"%}"/>
							</svg>
						</a>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
</div>

<div class="row">
	<div class="content">
		<nav aria-label="Page navigation example">
			<ul class="pagination">
				<li class="page-item">
					<a class="page-link" href="{% url 'cameras' %}?page=1">
						<span aria-hidden="true">&laquo;</span>
					</a>
				</li>
				{% if cameras_list.has_previous %}
				<li class="page-item"><a class="page-link" href="{% url 'cameras' %}?page={{ cameras_list.previous_page_number }}">&#139</a></li>
				{% else %}
				<li class="page-item disabled"><a class="page-link" >&#139</a></li>
				{% endif %}

				{% if cameras_list.paginator.num_pages <= 6 %}
					{% for i in pages %}
						<li class="page-item {% if cameras_list.number == i %} active {% endif %} ">
							<a class="page-link" href="{% url 'cameras' %}?page={{i}}">{{i}}</a>
						</li>
					{% endfor %}
				{% else %}
					<li class="page-item disabled"><a class="page-link">...</a></li>
					{% for i in many_pages %}
						<li class="page-item {% if cameras_list.number == i %} active {% endif %} ">
							<a class="page-link" href="{% url 'cameras' %}?page={{i}}">{{i}}</a>
						</li>
					{% endfor %}
					<li class="page-item disabled"><a class="page-link">...</a></li>
				{% endif %}

				{% if cameras_list.has_next %}
				<li class="page-item"><a class="page-link" href="{% url 'cameras' %}?page={{ cameras_list.next_page_number }}">&#155</a></li>
				{% else %}
				<li class="page-item disabled"><a class="page-link">&#155</a></li>
				{% endif %}
				<li class="page-item">
					<a class="page-link" href="{% url 'cameras' %}?page={{ cameras_list.paginator.num_pages }}">
						<span aria-hidden="true">&raquo;</span>
					</a>
				</li>
			</ul>
		</nav>
	</div>
</div>

<!-- Create Modal -->
{% include 'cameras_admin/forms/create.html' %}

<!-- Update Modal -->
{% include 'cameras_admin/forms/update.html' %}

<!-- Delete Modal -->
{% include 'cameras_admin/forms/delete.html' %}

{% endblock %}
